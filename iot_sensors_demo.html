---
layout : "page"
title : "IoT sensors demo"
---

<!-- begin body -->
<h2>Fish tank</h2>
<pre>Temperature: <br /><span id="temp"></span></pre></pre>
<pre>Humidity: <br /><span id="humid"></span></pre>

<script src="/assets/mqtt.js" type="text/javascript"></script>
<script type="text/javascript">
		function getHomeSensorsData() {
	      var client = mqtt.connect("ws://mia.tnhh.net:9001"); // you add a ws:// url here
	      client.subscribe("/PersonalProjects/fishtank01/sensors");

	      client.on("message", function(topic, payload) {
	        //alert([topic, payload].join(": "));
	        //client.end();
		data = JSON.parse(payload);
	        document.getElementById("temp").innerText += " " + data.sensors.temperature;
	        document.getElementById("humid").innerText += " " + data.sensors.humidity;
	      });
		}

		getHomeSensorsData();
</script>
<!-- end body -->


